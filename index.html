<!doctype html>
<html lang="fa">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>QR ÿ≥ÿßÿ≤ Ÿæ€åÿ¥ÿ±ŸÅÿ™Ÿá</title>

<script src="https://cdn.jsdelivr.net/npm/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Vazirmatn:wght@700&display=swap');
  :root{--accent:#06b6d4;--bg:#0d0d0d;--panel:#111}
  html,body{height:100%;margin:0;background:var(--bg);color:#fff;font-family:'Vazirmatn',sans-serif;direction:rtl}
  .wrap{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:18px;box-sizing:border-box}
  h1{font-family:'Orbitron',sans-serif;color:var(--accent);font-size:30px;margin:6px 0;text-shadow:0 0 14px rgba(6,182,212,.2),0 0 28px rgba(8,145,178,.08)}
  .card{background:rgba(255,255,255,0.02);padding:18px;border-radius:12px;box-shadow:0 6px 24px rgba(0,0,0,.6);width:360px;max-width:95%}
  textarea{width:100%;height:80px;border-radius:10px;padding:10px;border:none;background:#111;color:#fff;resize:none;font-size:14px;direction:ltr}
  .row{display:flex;gap:8px;align-items:center;margin-top:10px}
  button{padding:10px 12px;border-radius:8px;border:none;background:var(--accent);color:#fff;cursor:pointer;font-weight:700}
  button[disabled]{opacity:.45;cursor:not-allowed}
  #qr{display:flex;justify-content:center;margin-top:16px;position:relative}
  #limitText{color:#ff9b9b;margin-top:8px;font-size:13px}
  .overlay{
    position:absolute;
    top:50%;left:50%;
    transform:translate(-50%,-50%);
    background:#000;
    padding:10px 22px;
    border-radius:10px;
    box-shadow:0 0 18px rgba(6,182,212,.6), 0 0 28px rgba(0,0,0,.8);
    text-align:center;
  }
  .overlay span{
    display:block;
    color:#fff;
    text-shadow:0 0 12px rgba(6,182,212,.8);
    font-weight:700;
    letter-spacing:1px;
  }
  .overlay .line1{
    font-family:'Orbitron',sans-serif;
    font-size:18px;
  }
  .overlay .line2{
    font-family:'Vazirmatn',sans-serif;
    font-size:16px;
  }
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>Rubika.ir/vps_plus</h1>
    <textarea id="textInput" placeholder="ÿ¢ÿØÿ±ÿ≥ €åÿß ŸÖÿ™ŸÜ ÿÆŸàÿØ ÿ±ÿß ÿ®ŸÜŸà€åÿ≥..."></textarea>
    <div class="row">
      <button id="generateBtn">ÿ≥ÿßÿÆÿ™ QR</button>
      <button id="downloadBtn" style="display:none">üì• ÿ∞ÿÆ€åÿ±Ÿá PNG</button>
    </div>
    <div id="limitText"></div>
    <div id="qr">
      <div class="overlay" id="centerOverlay" style="display:none">
        <span class="line1">QR CODE</span>
        <span class="line2">Rubika:VPS_Plus</span>
      </div>
    </div>
  </div>
</div>

<script>
// ŸÖÿ≠ÿØŸàÿØ€åÿ™ ÿ±Ÿàÿ≤ÿßŸÜŸá
const MAX_PER_DAY = 2;
function todayKey(){ const d=new Date();return d.toISOString().split('T')[0]; }
function getUsage(){
  const d=localStorage.getItem('qr_limit');if(!d)return{date:todayKey(),count:0};
  const p=JSON.parse(d);if(p.date!==todayKey())return{date:todayKey(),count:0};return p;
}
function setUsage(p){localStorage.setItem('qr_limit',JSON.stringify(p));}
const limitText=document.getElementById('limitText');
const genBtn=document.getElementById('generateBtn');
const dlBtn=document.getElementById('downloadBtn');
const qrBox=document.getElementById('qr');
let qrCode;
function disableGen(){genBtn.disabled=true;limitText.textContent=`ŸÖÿ≠ÿØŸàÿØ€åÿ™ ÿßŸÖÿ±Ÿàÿ≤ (${MAX_PER_DAY} ÿ®ÿßÿ±) ÿ™ŸÖÿßŸÖ ÿ¥ÿØ`;}

async function makeQR(){
  let use=getUsage();
  if(use.count>=MAX_PER_DAY){disableGen();return;}
  const val=document.getElementById('textInput').value.trim();
  if(!val){alert('ŸÖÿ™ŸÜ€å Ÿàÿßÿ±ÿØ ⁄©ŸÜ');return;}
  use.count++;setUsage(use);
  limitText.textContent=`ÿ™ÿπÿØÿßÿØ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßŸÖÿ±Ÿàÿ≤: ${use.count}/${MAX_PER_DAY}`;
  if(use.count>=MAX_PER_DAY)disableGen();

  if(qrCode)qrBox.innerHTML='<div class="overlay" id="centerOverlay" style="display:none"><span class="line1">QR CODE</span><span class="line2">Rubika:VPS_Plus</span></div>';
  const overlay=document.getElementById('centerOverlay');
  qrCode=new QRCodeStyling({
    width:320,height:320,data:val,
    dotsOptions:{color:"#ffffff",type:"rounded"},
    cornersSquareOptions:{color:"#06b6d4",type:"extra-rounded"},
    backgroundOptions:{color:"#0d0d0d"}
  });
  qrCode.append(qrBox);
  setTimeout(()=>overlay.style.display='block',400);
  dlBtn.style.display='inline-block';
}

genBtn.onclick=makeQR;
dlBtn.onclick=()=>{if(qrCode)qrCode.download({name:'QR_Code',extension:'png'});};

(function init(){
  const use=getUsage();
  limitText.textContent=`ÿ™ÿπÿØÿßÿØ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßŸÖÿ±Ÿàÿ≤: ${use.count}/${MAX_PER_DAY}`;
  if(use.count>=MAX_PER_DAY)disableGen();
})();
</script>
</body>
</html>
