<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QR Code با متن وسط</title>
<script src="https://cdn.jsdelivr.net/npm/qr-code-styling@1.5.0/lib/qr-code-styling.js"></script>
<style>
  body { 
    display:flex; 
    flex-direction:column; 
    align-items:center; 
    justify-content:center; 
    height:100vh; 
    font-family:sans-serif; 
    background:#0c0c0c; 
    color:white;
  }
  input, button {
    padding:10px; margin:5px; border-radius:5px; border:none;
  }
  button { background:#06b6d4; color:white; cursor:pointer; font-weight:bold; }
</style>
</head>
<body>

<h2>QR Code با متن وسط</h2>
<input type="text" id="urlInput" placeholder="آدرس خود را وارد کنید" size="35">
<button onclick="generateQR()">ساخت QR</button>
<div id="qr"></div>

<script>
function createCenterTextImage(text) {
  const canvas = document.createElement("canvas");
  canvas.width = 120;
  canvas.height = 40;
  const ctx = canvas.getContext("2d");
  ctx.fillStyle = "#ffffff";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.font = "bold 10px sans-serif";
  ctx.fillStyle = "#ff0000";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  ctx.fillText(text, canvas.width / 2, canvas.height / 2);
  return canvas.toDataURL("image/png");
}

let qrCode = new QRCodeStyling({
  width: 300,
  height: 300,
  type: "canvas",
  data: "https://aparat.com",
  image: createCenterTextImage("rdnsparham-rgb.github.io/QR"),
  imageOptions: { crossOrigin: "anonymous", imageSize: 0.3 },
  dotsOptions: { color: "#ffffff", type: "rounded" },
  backgroundOptions: { color: "#0c0c0c" },
  cornersSquareOptions: { color: "#06b6d4", type: "extra-rounded" }
});

document.getElementById("qr").appendChild(qrCode._canvas);

function generateQR(){
  const url = document.getElementById("urlInput").value;
  if(!url) return alert("آدرس وارد کنید!");
  qrCode.update({data: url});
}
</script>

</body>
</html>
